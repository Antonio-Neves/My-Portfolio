<p>Neste artigo vou explicar a necessidade de utilizar ambientes virtuais, como usar e criar, com <a href="https://virtualenv.pypa.io/en/latest/" target="_blank">Virtualenv</a> no Windows 10.<br></p><p>Existem outras boas ferramentas para criar ambientes virtuais, mas sem dúvida Virtualenv é um dos mais queridos e usados.</p><h2>Ambientes Virtuais, porquê?</h2><p>Vamos imaginar que temos instalado no sistema operativo a versão do Python 3.7.9, e vamos começar a desenvolver um sistema com <a href="https://kivy.org/#home" target="_blank">Kivy</a>, instalamos a biblioteca <a href="https://kivy.org/#home" target="_blank">Kivy</a> como explico neste artigo Como instalar o <a href="https://kivy.org/#home" target="_blank">Kivy</a> no Windows 10 (2020), tudo bem, vai funcionar sem problemas, depois precisamos instalar OpenCV, e tudo continua funcionando bem, entretanto começamos a desenvolver um sistema web, e instalamos <a href="https://www.djangoproject.com/" target="_blank">Django</a> e todas as bibliotecas necessárias.</p><p>Reparem que já começa a ficar tudo um pouco confuso, tudo instalado na mesma pasta junto da instalação principal do Python.</p><p>Mas agora podemos ter instalado uma biblioteca para usar com o <a href="https://www.djangoproject.com/" target="_blank">Django</a> que não vai funcionar por incompatibilidade com outra biblioteca instalada anteriormente para ser usada no nosso projeto <a href="https://kivy.org/#home" target="_blank">Kivy</a>.</p><p>E agora? Desinstalamos uma e deixamos a outra?</p><p>Vamos imaginar outra situação, temos instalado <a href="https://www.djangoproject.com/" target="_blank">Django</a> 3 e precisamos mexer em um projeto antigo desenvolvido com <a href="https://www.djangoproject.com/" target="_blank">Django</a> 2 com algumas bibliotecas que só funcionam com uma versão <a href="https://www.djangoproject.com/" target="_blank">Django</a> 2 e não funcionam com <a href="https://www.djangoproject.com/" target="_blank">Django</a> 3.</p><p>Entendem agora como o ideal é sempre ter uma instalação <a href="https://www.python.org/" target="_blank">Python</a> para cada projeto que vamos desenvolver?</p><p>A melhor solução é criarmos um ambiente virtual para cada projeto, ou pelo menos criar um para projetos parecidos ou com as mesma necessidade a nível de versões e bibliotecas.</p><p>Outra situação em que existe necessidade de utilizar ambientes virtuais, é quando queremos experimentar se as nossas aplicações funcionam com diferentes versões das mesmas bibliotecas.</p><p>A principal razão, manter as instalações do Python no sistema, originais, limpas e sempre prontas para que ambientes virtuais sejam criados sem problemas.</p><p>É importante não confundir, versões diferentes do Python no Windows com ambientes virtuais diferentes.<br></p><p>Na prática cada ambiente virtual vai “criar uma cópia” de uma versão do Python que escolhermos, versão que já tenha sido instalada anteriormente no sistema.<br></p><p>Neste artigo explico <a href="https://antoniocalheirosneves.up.railway.app/blog/article/como-instalar-varias-versoes-python-no-windows-10/" target="_blank">Como instalar várias versões Python no Windows 10.</a><br></p><p>Podemos ter várias versões do Python diferentes instaladas e podemos ter vários ambientes virtuais com a mesma versão do Python, mas em cada ambiente, diferentes bibliotecas.<br></p><h2>Considerações Iniciais</h2><p>No meu sistema já tenho instalado o Python 3.7.9 e o Python 3.9.0.</p><p>Vamos usar o terminal e o explorador do Windows.<br></p><h2>Instalação Virtualenv</h2><p>Vamos começar por ver se o <a href="https://virtualenv.pypa.io/en/latest/" target="_blank">Virtualenv</a> já está instalado, para isso abrimos um terminal (prompt de comando) com permissões de administrador e digitamos.</p><pre>where virtualenv</pre><p>No caso de não estar instalado simplesmente digitamos.<br></p><pre>pip install virtualenv</pre><p>Na foto abaixo, no meu caso já tenho instalado.<br></p><p>Pode parecer uma contradição em relação ao que expliquei anteriormente, mas é a única instalação que vamos fazer “junto” da instalação principal do Python no Windows.<br></p><p>No caso de termos várias versões diferentes do Python, vai ser instalado junto com a versão que o Windows “considera” como principal, como explico neste artigo.<br></p><p>Se fizermos a instalação usando um terminal sem permissões de administrador, a instalação vai ser apenas para o usuário logado no momento<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142023/MyPortfolio/articles_body/windows_virtualenv_01_zqhrwi.jpg" style="width: 600px;"><br></p><h2>Onde guardar os ambientes virtuais? Nomes e quantidade</h2><p>Vamos pensar juntos, se tivermos vários projetos que utilizam a mesma versão do Python, e as mesmas bibliotecas, basta criar um ambiente virtual para esses projetos.</p><p>Bibliotecas diferentes já precisamos de ambientes diferentes.<br></p><p>Mas resumindo, os ambientes virtuais podem ser guardados onde quiserem e terem o nome que quiserem.<br></p><p>Eu por exemplo, tenho uma pasta chamada devenvs onde guardo alguns.<br></p><p>Para projetos maiores e em especial com Django eu guardo o ambiente virtual dentro da própria pasta do projeto.<br></p><p>Vamos então criar uma pasta dentro da nossa pasta pessoal chamada ‘devenvs’.<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142023/MyPortfolio/articles_body/windows_virtualenv_02_h1eh40.jpg" style="width: 600px;"><br></p><h2>Criar um ambiente virtual</h2><p>Entramos dentro da pasta que criamos anteriormente.</p><p>Agora temos 2 opções, ou criamos uma nova pasta com o nome que escolhermos&nbsp; para o ambiente virtual e depois dentro da pasta criamos o ambiente, ou vamos criar diretamente a pasta e o ambiente ao mesmo tempo.<br></p><p>Não sei explicar porquê, mas eu costumo criar primeiro a pasta escolhendo já o nome do ambiente virtual e depois sim criar o ambiente virtual.<br></p><p>Mas vou explicar as duas maneiras de fazer isso.<br></p><p>Então dentro da pasta onde vamos guardar os ambientes virtuais, vamos criar outra pasta chamada py390 (pode ser qualquer nome)<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142023/MyPortfolio/articles_body/windows_virtualenv_03_lpqhz2.jpg" style="width: 600px;"><br></p><p>Vamos abrir um terminal, não é necessário um terminal com permissões de administrador.<br></p><p>Com o comando<br></p><pre>cd</pre><p>Vamos até chegar dentro da pasta onde vamos criar o ambiente virtual.</p><p>Em seguida digitamos.<br></p><pre>virtualenv .</pre><p>Atenção precisamos digitar ‘ virtualenv ‘ um espaço e um ponto ‘ . ‘</p><p>O ponto é necessário por que já criamos anteriormente a pasta do ambiente virtual.<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142023/MyPortfolio/articles_body/windows_virtualenv_04_hc1smi.jpg" style="width: 600px;"><br></p><p>Já temos um ambiente virtual, com a versão Python 3.9.0.<br></p><p>Como utilizamos apenas ‘virtualenv’ sem definir a versão do Python, foi criado um ambiente com a versão principal do Windows, recordem que no meu caso tenho duas versões instalas no Windows, sendo a 3.9.0 a versão principal.<br></p><p>Agora chegou a hora de aprender a usar o ambiente virtual.<br></p><h2>Como usar o Virtualenv</h2><p>Antes de usar o ambiente virtual, por exemplo para instalar as bibliotecas necessárias, é necessário ativa-lo.</p><p>No terminal vamos entrar dentro do ambiente virtual, no nosso caso chama-se ‘py390’, e depois precisamos entrar dentro da pasta Scripts.<br></p><p>Dentro da pasta Scripts, digitamos<br></p><pre>activate</pre><p>Este é o comando para ativar o ambiente virtual.</p><p>Reparem que agora entre parentes, temos o nome do ambiente virtual confirmando que está ativado.<br></p><p>Explicando de uma maneira simples, foi criado temporariamente nas variáveis de ambiente, um caminho (path) indicando ao Windows que a versão principal do Python, é a versão que está no ambiente virtual ativado.<br></p><p>Podemos continuar dentro da pasta Scripts ou mover para outra, mas os comandos ‘pip’ por exemplo para instalarmos bibliotecas necessárias, vão instalar essas bibliotecas dentro do ambiente virtual.<br></p><p>Se arrancarmos pelo terminal agora, um arquivo .py, o interpretador Python vai ser o do ambiente virtual.<br></p><p>Se utilizarmos um IDE e indicarmos como interpretador o ambiente virtual, a situação vai ser a mesma.<br></p><p>Com Visual Studio Code ou PyCharm por exemplo, ao abrirmos um projeto e indicarmos o ambiente virtual o próprio IDE ativa o ambiente virtual<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142023/MyPortfolio/articles_body/windows_virtualenv_05_yz9303.jpg" style="width: 600px;"><br></p><p>Para desativar, basta digitar.<br></p><pre>deactivate</pre><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142023/MyPortfolio/articles_body/windows_virtualenv_06_ly8oh4.jpg" style="width: 600px;"><br></p><h2>Como criar um ambiente virtual com uma versão especifica do Python</h2><p>Embora a maneira de usar seja igual.</p><p>Ativamos entrando na pasta ‘Scripts’ e digitamos ‘activate’, ou desativamos com o comando ‘deactivate’.<br></p><p>Para criar este ambiente com uma versão do Python diferente, precisamos digitar um parâmetro a mais.<br></p><p>Vamos começar por criar uma nova pasta, onde vamos criar o novo ambiente virtual.<br></p><p>Eu vou chamar de py379<br></p><p>Entramos no terminal, usamos o comando.<br></p><pre>cd</pre><p>Até entrarmos dentro da nova pasta, e digitamos.</p><pre>virtualenv . --python=3.7.9</pre><p>E já temos um ambiente virtual com Virtualenv, com o Python 3.7.9.</p><p>Se neste momento, apareceu algum erro, mais abaixo tem uma nota importante, onde explico outra forma de escolher a versão do Python para criarem o ambiente virtual<br></p><p>Aproveito para recordar que esta versão do Python já tinha sido instalada anteriormente no Windows e está no PATH.<br></p><p>Vejam este artigo, <a href="https://antoniocalheirosneves.up.railway.app/blog/article/como-instalar-varias-versoes-python-no-windows-10/" target="_blank">Como instalar várias versões Python no Windows 10</a>, se têm alguma dúvida.<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142024/MyPortfolio/articles_body/windows_virtualenv_07_epdwld.jpg" style="width: 600px;"><br></p><p>Vamos digitar alguns comandos para que possam olhar o que vai acontecer e assim entenderem mais facilmente como usar um ambiente virtual.<br></p><p>Podemos continuar no terminal, dentro da pasta do novo ambiente virtual, e digitamos o comando.<br></p><pre>python</pre><p>Reparem que o ambiente virtual não está ativado e por isso, Python é o 3.9.0, a versão principal do Windows.</p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142023/MyPortfolio/articles_body/windows_virtualenv_08_tblhrm.jpg" style="width: 600px;"><br></p><p>Continuamos digitando.<br></p><pre>exit()</pre><p>Para sair do Python.</p><p>E dentro da pasta do ambiente virtual py379, para entrarmos na pasta Scripts, usamos.<br></p><pre>cd Scripts</pre><p>E depois.</p><pre>activate</pre><p>Agora que já ativamos o ambiente virtual, digitamos novamente.</p><pre>python</pre><p>Neste momento estamos a usar o Python 3.7.9.</p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142024/MyPortfolio/articles_body/windows_virtualenv_09_jqu6xz.jpg" style="width: 600px;"><br></p><p>Nota Importante<br></p><p>Até agora aprendemos a instalar ambientes virtuais com Virtualenv, e com diferentes versões de Python já instaladas anteriormente.<br></p><p>Mas as duas versões que usei neste tutorial, além de já estarem instaladas, também estão no PATH do Windows.<br></p><p>No caso de termos necessidade de criar um ambiente virtual com uma versão do Python que não esteja no path, precisamos utilizar um comando que indique o caminho completo do Python executável.<br></p><p>Podemos encontrar o caminho de várias maneiras, mas eu costumo usar o explorador do Windows.<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142025/MyPortfolio/articles_body/windows_virtualenv_10_vy1qo8.jpg" style="width: 600px;"><br></p><p>Voltamos para o terminal, criamos uma nova pasta dentro da pasta onde guardamos os ambientes, desta vez vamos criar a pasta pelo terminal em vez de usar o explorador do Windows.<br></p><p>Dentro da pasta ‘devenvs’, usamos o comando.<br></p><pre>mkdir venv379</pre><p>para criar a pasta ‘venv379’, depois entramos nela com o comando</p><pre>cd venv379</pre><p>dentro da pasta onde vai ser criado o novo ambiente virtual em vez de usar ‘virtualenv . –python=3.7.9’, vamos usar o comando</p><pre>virtualenv . --python "C:\Program Files\Python37\python.exe"</pre><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728142026/MyPortfolio/articles_body/windows_virtualenv_11_d69fe2.jpg" style="width: 600px;"><br></p><h2>Considerações finais e resumo</h2><p>Creio que agora já entenderam a necessidade de sempre desenvolvermos nossos projetos utilizando ambientes virtuais, acredito também que já todos conseguem criar e utilizar sem problemas Virtualenv.</p><p>Agora é possível instalar e desinstalar com segurança, novas&nbsp; bibliotecas e experimentarmos o que quisermos.<br></p><p>Para apagar um ambiente virtual basta apagar a pasta.<br></p><p>Como boa prática a primeira coisa que faço sempre, depois de criar um ambiente virtual, é atualizar o ‘pip’ e o ‘setuptools’<br></p><p>E nunca esqueçam de ativar o ambiente para ser usado.<br></p><p>No caso de mudarem as pastas de lugar lembrem também que é necessário informar os IDEs que estão a usar<br></p><h2>Como usar e criar Virtualenv no Windows 10</h2><p>Para finalizar, agradeço por você ter chegado até aqui, e desejo que este post tenha sido útil.</p>