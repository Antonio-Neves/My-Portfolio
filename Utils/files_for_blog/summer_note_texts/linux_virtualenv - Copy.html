<p>Neste artigo vou explicar a necessidade de utilizar ambientes virtuais, como usar e criar, com <a href="https://virtualenv.pypa.io/en/latest/" target="_blank" style="background-color: rgb(255, 255, 255);">Virtualenv</a> no <a href="https://www.linux.org/" target="_blank" style="background-color: rgb(255, 255, 255);">Linux</a><br></p><p>Existem outras boas ferramentas para criar ambientes virtuais, mas sem dúvida <a href="https://virtualenv.pypa.io/en/latest/" target="_blank">Virtualenv</a> é um dos mais queridos e usados.<br></p><h2>Ambientes Virtuais, porquê?</h2><p>Vamos imaginar que temos instalado no sistema operativo a versão do <a href="https://www.python.org/" target="_blank">Python</a> 3.7.9, e vamos começar a desenvolver um sistema com <a href="https://kivy.org/#home" target="_blank">Kivy</a>, instalamos a biblioteca <a href="https://kivy.org/#home" target="_blank">Kivy</a>&nbsp;e&nbsp;tudo bem, vai funcionar sem problemas, depois precisamos instalar <a href="https://opencv.org/" target="_blank">OpenCV</a>, e tudo continua funcionando bem, entretanto começamos a desenvolver um sistema web, e instalamos <a href="https://www.djangoproject.com/" target="_blank">Django</a> e todas as bibliotecas necessárias.</p><p>Reparem que já começa a ficar tudo um pouco confuso, tudo instalado na mesma pasta junto da instalação principal do <a href="https://www.python.org/" target="_blank">Python</a>.<br></p><p>Mas agora podemos ter instalado uma biblioteca para usar com o <a href="https://www.djangoproject.com/" target="_blank">Django</a> que não vai funcionar por incompatibilidade com outra biblioteca instalada anteriormente para ser usada no nosso projeto <a href="https://kivy.org/#home" target="_blank">Kivy</a>.<br></p><p>E agora? Desinstalamos uma e deixamos a outra?<br></p><p>Vamos imaginar outra situação, temos instalado Django 3 e precisamos mexer em um projeto antigo desenvolvido com Django 2 com algumas bibliotecas que só funcionam com uma versão Django 2 e não funcionam com Django 3.<br></p><p>Entendem agora como o ideal é sempre ter uma instalação Python para cada projeto que vamos desenvolver?<br></p><p>A melhor solução é criarmos um ambiente virtual para cada projeto, ou pelo menos criar um ambiente virtual, para projetos parecidos ou com as mesma necessidade a nível de versões e bibliotecas.<br></p><p>Outra situação em que existe necessidade de utilizar ambientes virtuais, é quando queremos experimentar se as nossas aplicações funcionam com diferentes versões das mesmas bibliotecas.<br></p><p>A principal razão, manter as instalações do Python no sistema, originais, limpas e sempre prontas para que ambientes virtuais sejam criados sem problemas.<br></p><p>É importante não confundir, versões diferentes do Python no Linux com ambientes virtuais diferentes.<br></p><p>Na prática cada ambiente virtual vai “criar uma cópia” de uma versão do Python que escolhermos, versão que já tenha sido instalada anteriormente no sistema.<br></p><p>Neste artigo explico, <a href="https://antoniocalheirosneves.up.railway.app/blog/article/como-instalar-varias-versoes-python-no-linux/" target="_blank">Como instalar várias versões Python no Linux.</a><br></p><p>Podemos ter várias versões do Python diferentes instaladas e podemos ter vários ambientes virtuais com a mesma versão do Python, mas em cada ambiente, diferentes bibliotecas.<br></p><h2>Considerações Iniciais</h2><p>O meu sistema operativo é o <a href="https://linuxmint.com/" target="_blank">Mint 20</a>, mas este tutorial serve também para <a href="https://ubuntu.com/" target="_blank">Ubuntu</a>, <a href="https://www.debian.org/" target="_blank">Debian</a> e muitas outras distribuições <a href="https://www.linux.org/" target="_blank">Linux</a>.</p><p>Neste artigo explico <a href="https://antoniocalheirosneves.up.railway.app/blog/article/como-instalar-varias-versoes-python-no-linux/" target="_blank">Como instalar várias versões Python no Linux</a>, de maneira correta e simples.<br></p><p>No meu Mint 20 já tenho instalado como instalações principais o Python 2.7.18 e 3.8.5 e posteriormente instalei o Python 3.7.9, 3.8.2 e o 3.9.0.<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728143890/MyPortfolio/articles_body/linux_virtualenv_01_btx0sk.jpg" style="width: 600px;"><br></p><h2>Instalação Virtualenv</h2><p>A instalação do Virtualenv deve ser a única instalação que fazemos nas versões principais do Python instaladas.</p><p>Mas antes devemos sempre atualizar o ‘pip’ e o ‘setuptools’&nbsp;<br></p><pre>python3.7 -m pip install --upgrade pip setuptools</pre><p>Em cada versão do Python vamos instalar o Virtualenv (para exemplo vou instalar na versão Python3.7.9).</p><pre>python3.7 -m pip install virtualenv</pre><h2>Onde guardar os ambientes virtuais? Nomes e quantidade</h2><p>Vamos pensar juntos, se tivermos vários projetos que utilizam a mesma versão do Python, e as mesmas bibliotecas, basta criar um ambiente virtual para esses projetos.</p><p>Bibliotecas diferentes já precisamos de ambientes diferentes.<br></p><p>Mas resumindo, os ambientes virtuais podem ser guardados onde quiserem e terem o nome que quiserem.<br></p><p>Eu por exemplo, tenho uma pasta chamada devenvs onde guardo alguns.<br></p><p>Para projetos maiores e em especial com Django eu guardo o ambiente virtual dentro da própria pasta do projeto.<br></p><p>Vamos então criar dentro da nossa pasta pessoal, uma pasta chamada ‘devenvs’ (pode ser qualquer nome e pode estar em qualquer lugar), onde vamos guardar nossos ambientes virtuais.<br></p><p>Para isso podemos usar o comando<br></p><pre>mkdir devenvs</pre><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728143890/MyPortfolio/articles_body/linux_virtualenv_02_zyhxay.jpg" style="width: 319px;"><br></p><h2>Criar um ambiente virtual com uma versão especifica do Python</h2><p>Entramos dentro da pasta que criamos anteriormente, com o comando.</p><pre>cd devenvs</pre><p>Agora temos 2 opções, ou criamos uma nova pasta com o nome que escolhermos para o ambiente virtual e depois dentro da pasta criamos o ambiente, ou vamos criar diretamente a pasta e o ambiente ao mesmo tempo.</p><p>Não sei explicar porquê, mas eu costumo criar primeiro a pasta escolhendo já o nome do ambiente virtual e depois sim, criar o ambiente virtual.<br></p><p>Mas vou explicar as duas maneiras de fazer isso.<br></p><p>Então dentro da pasta onde vamos guardar os ambientes virtuais, vamos criar outra pasta chamada ‘venv01’ (pode ser qualquer nome).<br></p><pre>mkdir venv01</pre><p>Entramos dentro da pasta nova.</p><pre>cd venv01</pre><p>E agora criamos o ambiente virtual com o comando.</p><p>Atenção, a versão do Python deve já estar instalada no sistema, como explico neste artigo, <a href="https://antoniocalheirosneves.up.railway.app/blog/article/como-instalar-varias-versoes-python-no-linux/" target="_blank">Como instalar várias versões Python no Linux</a><br></p><pre>python3.7 -m virtualenv .</pre><p>Atenção, precisamos digitar ‘ virtualenv ‘, um ‘ espaço ‘ e um ponto ‘ . ‘</p><p>O ponto é necessário por que já criamos anteriormente a pasta do ambiente virtual.<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728143890/MyPortfolio/articles_body/linux_virtualenv_03_hikamj.png" style="width: 653px;"><br></p><p>Já temos um ambiente virtual, com a versão Python 3.7.9.<br></p><p>Agora chegou a hora de aprender a usar o ambiente virtual.<br></p><h2>Como usar o Virtualenv</h2><p>Antes de usar o ambiente virtual, por exemplo para instalar as bibliotecas necessárias, é necessário ativa-lo.</p><p>No terminal dentro do ambiente virtual, no nosso caso chama-se ‘venv01’, precisamos usar o comando ‘source’ e indicar o caminho até ao arquivo ‘activate’, que está dentro da pasta ‘bin’.<br></p><pre>source bin/activate</pre><p>Este é o comando para ativar o ambiente virtual.</p><p>Reparem que agora entre parentes, temos o nome do ambiente virtual confirmando que está ativado.<br></p><p>Explicando de uma maneira simples, foi criado temporariamente nas variáveis de ambiente, um caminho (path) indicando ao Linux que a versão principal do Python neste momento, é a versão que está no ambiente virtual ativado.<br></p><p>Agora os comandos ‘pip’, por exemplo para instalarmos bibliotecas necessárias, vão instalar essas bibliotecas dentro do ambiente virtual.<br></p><p>Se arrancarmos pelo terminal agora, um arquivo .py, o interpretador Python vai ser o do ambiente virtual.<br></p><p>Se utilizarmos um IDE e indicarmos como interpretador o ambiente virtual, a situação vai ser a mesma.<br></p><p>Com Visual Studio Code ou PyCharm por exemplo, ao abrirmos um projeto e indicarmos o ambiente virtual o próprio IDE ativa o ambiente virtual<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728143890/MyPortfolio/articles_body/linux_virtualenv_04_zdadj3.jpg" style="width: 600px;"><br></p><p>Para desativar, basta digitar.<br></p><pre>deactivate</pre><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728143890/MyPortfolio/articles_body/linux_virtualenv_05_ohp0jw.jpg" style="width: 600px;"><span style="color: inherit; font-family: inherit; font-size: 30px;"><br></span></p><p><span style="color: inherit; font-family: inherit; font-size: 30px;">Qual Python?</span><br></p><p>Vamos digitar alguns comandos para que possam olhar o que vai acontecer e assim entenderem mais facilmente como usar um ambiente virtual.</p><p>Podemos continuar no terminal, dentro da pasta do novo ambiente virtual, e digitamos o comando.<br></p><pre>which python3.7</pre><p>Reparem que o ambiente virtual não está ativado e por isso, Python é o 3.7.9, mas a versão principal instalada no Linux, não o Python do ambiente virtual.</p><p>Agora ativamos o ambiente virtual.<br></p><pre>source bin/activate</pre><p>Agora que já ativamos o ambiente virtual, digitamos novamente.</p><pre>which python3.7</pre><p>Neste momento estamos a usar o Python 3.7.9 do ambiente virtual.</p><p>Lembrem que para desativar basta digitar<br></p><pre>deactivate</pre><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728143892/MyPortfolio/articles_body/linux_virtualenv_06_tty5zc.png" style="width: 654px;"><br></p><h2>Criar uma pasta primeiro ou fazer tudo ao mesmo tempo?</h2><p>Como aprendemos anteriormente, podemos criar uma pasta com o nome do ambiente virtual que vamos criar e depois criar o ambiente com o comando.</p><pre>virtualenv .</pre><p>Para criarmos a pasta e o ambiente ao mesmo tempo, em vez do ponto colocamos o nome do ambiente virtual e se necessário os atributos depois.</p><p>No exemplo da foto, estou a criar um ambiente virtual chamado teste_01 e escolhendo como versão do Python o 3.9.1<br></p><p><img src="https://res.cloudinary.com/antoniocalheirosneves/image/upload/v1728143892/MyPortfolio/articles_body/linux_virtualenv_07_pcbtsu.png" style="width: 698px;"><br></p><h2>Considerações finais e resumo</h2><p>Creio que agora já entenderam a necessidade de sempre desenvolvermos nossos projetos utilizando ambientes virtuais, acredito também que já todos conseguem criar e utilizar sem problemas Virtualenv.</p><p>Agora é possível instalar e desinstalar com segurança, novas&nbsp; bibliotecas e experimentarmos o que quisermos.<br></p><p>Para apagar um ambiente virtual basta apagar a pasta.<br></p><p>Como boa prática a primeira coisa que faço sempre, depois de criar um ambiente virtual, é atualizar o ‘pip’ e o ‘setuptools’<br></p><p>E nunca esqueçam de ativar o ambiente para ser usado.<br></p><p>No caso de mudarem as pastas de lugar lembrem também que é necessário informar os IDEs que estão a usar<br></p><h2>Como usar e criar Virtualenv no Linux</h2><p>Para finalizar, agradeço por você ter chegado até aqui, e desejo que este post tenha sido útil.</p>